import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.util.ArrayList;
import java.util.Random;

public class KawiarniaGra extends JFrame {

    private JPanel panelGlowny;
    private JTextArea logKlienta;
    private JButton przyciskEspresso;
    private JButton przyciskLatte;
    private JButton przyciskCappuccino;
    private ArrayList<String> zamowienia;
    private int punkty = 0;
    private Random rand = new Random();

    public KawiarniaGra() {
        setTitle("Kawiarnia telekomunikacyjna");
        setSize(600, 400);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLocationRelativeTo(null);

        panelGlowny = new JPanel();
        panelGlowny.setLayout(new BorderLayout());

        logKlienta = new JTextArea();
        logKlienta.setEditable(false);
        logKlienta.setFont(new Font("Monospaced", Font.PLAIN, 14));
        panelGlowny.add(new JScrollPane(logKlienta), BorderLayout.CENTER);

        JPanel panelPrzyciskow = new JPanel();
        przyciskEspresso = new JButton("Espresso");
        przyciskLatte = new JButton("Latte");
        przyciskCappuccino = new JButton("Cappuccino");

        panelPrzyciskow.add(przyciskEspresso);
        panelPrzyciskow.add(przyciskLatte);
        panelPrzyciskow.add(przyciskCappuccino);

        panelGlowny.add(panelPrzyciskow, BorderLayout.SOUTH);

        add(panelGlowny);

        zamowienia = new ArrayList<>();
        generujZamowienie();

        // Obsługa przycisków
        ActionListener przygotujNapoj = e -> {
            JButton przycisk = (JButton) e.getSource();
            String napoj = przycisk.getText();
            sprawdzZamowienie(napoj);
        };

        przyciskEspresso.addActionListener(przygotujNapoj);
        przyciskLatte.addActionListener(przygotujNapoj);
        przyciskCappuccino.addActionListener(przygotujNapoj);
    }

    private void generujZamowienie() {
        String[] napoje = {"Espresso", "Latte", "Cappuccino"};
        String zamowienie = napoje[rand.nextInt(napoje.length)];
        zamowienia.add(zamowienie);
        logKlienta.append("Nowy klient zamawia: " + zamowienie + "\n");
    }

    private void sprawdzZamowienie(String napoj) {
        if (!zamowienia.isEmpty()) {
            String aktualne = zamowienia.get(0);
            if (napoj.equals(aktualne)) {
                punkty++;
                logKlienta.append("Poprawnie! Punkty: " + punkty + "\n");
                zamowienia.remove(0);
                generujZamowienie();
            } else {
                logKlienta.append("Błąd! Spróbuj ponownie.\n");
            }
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(() -> {
            KawiarniaGra gra = new KawiarniaGra();
            gra.setVisible(true);
        });
    }
}
